{"version":3,"sources":["webpack:///./src/components/index/Tag.vue?758e","webpack:///src/components/index/Tag.vue","webpack:///./src/components/index/Tag.vue?30d2","webpack:///./src/components/index/Tag.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","Object","keys","tags","length","loadingTags","staticClass","_v","_s","model","value","callback","$$v","selectedTags","expression","_l","tag","key","blogArticles","totalPages","loading","selectedTagsList","on","getCurrentPage","staticRenderFns","component","VCard","VCardTitle","VChip","VChipGroup","VContainer","VSkeletonLoader"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,KAAK,CAAiC,IAA/BC,OAAOC,KAAKR,EAAIS,MAAMC,QAAeV,EAAIW,YAA+CP,EAAG,MAAM,CAACA,EAAG,SAAS,CAACQ,YAAY,QAAQ,CAACR,EAAG,MAAM,CAACQ,YAAY,gCAAgC,CAACR,EAAG,eAAe,CAACQ,YAAY,kBAAkB,CAACZ,EAAIa,GAAG,QAAQT,EAAG,eAAe,CAACQ,YAAY,kBAAkB,CAACZ,EAAIa,GAAG,MAAMT,EAAG,OAAO,CAACQ,YAAY,oCAAoC,CAACZ,EAAIa,GAAGb,EAAIc,GAAGP,OAAOC,KAAKR,EAAIS,MAAMC,WAAWV,EAAIa,GAAG,SAAS,GAAGT,EAAG,eAAe,CAACE,MAAM,CAAC,OAAS,GAAG,SAAW,GAAG,eAAe,iBAAiBS,MAAM,CAACC,MAAOhB,EAAgB,aAAEiB,SAAS,SAAUC,GAAMlB,EAAImB,aAAaD,GAAKE,WAAW,iBAAiB,CAAEpB,EAAe,YAAEI,EAAG,MAAM,CAACA,EAAG,oBAAoB,CAACE,MAAM,CAAC,KAAO,WAAW,GAAGF,EAAG,MAAMJ,EAAIqB,GAAId,OAAOC,KAAKR,EAAIS,OAAO,SAASa,GAAK,OAAOlB,EAAG,SAAS,CAACmB,IAAID,EAAIhB,MAAM,CAAC,OAAS,GAAG,cAAc,YAAY,CAACN,EAAIa,GAAG,IAAIb,EAAIc,GAAGQ,EAAI,KAAKtB,EAAIS,KAAKa,GAAK,KAAK,UAAS,MAAM,GAAGlB,EAAG,iBAAiB,CAACE,MAAM,CAAC,gBAAgBN,EAAIwB,aAAa,aAAaxB,EAAIyB,WAAW,QAAUzB,EAAI0B,QAAQ,kBAAkB1B,EAAI2B,kBAAkBC,GAAG,CAAC,oBAAsB5B,EAAI6B,mBAAmB,GAA3hCzB,EAAG,MAAM,CAACA,EAAG,kBAAkB,MACzN0B,EAAkB,G,oCCiCtB,GACE,KAAF,MACE,WAAF,CAAI,cAAJ,OAAI,eAAJ,QACE,MAAF,aACE,KAAF,WAAI,MAAJ,CACM,KAAN,GACM,aAAN,IACM,iBAAN,GACM,aAAN,GACM,WAAN,EACM,SAAN,EACM,aAAN,IAEE,QAAF,CACI,aADJ,WAGM,IADA,IAAN,yBACA,mBACQ,GAAR,sBAEU,KAAV,gBACU,KAAV,qBACU,QAIN,WAZJ,WAaM,IAAN,OACM,KAAN,6CAAQ,QAAR,CAAU,eAAV,yBACA,kBACQ,EAAR,eACQ,IAAR,SACA,YACU,EAAV,iBACA,eACY,EAAZ,eAEY,EAAZ,qBAIA,YACQ,EAAR,eACQ,QAAR,WAGI,YAhCJ,SAgCA,GACM,KAAN,WACM,IAAN,OACM,KAAN,4FAAQ,QAAR,CAAU,eAAV,yBACA,kBACQ,EAAR,WACQ,IAAR,SACA,YAEU,EAAV,6BACU,EAAV,6BAGA,YACQ,EAAR,WACQ,QAAR,WAGI,eAlDJ,SAkDA,GACM,KAAN,iBAIE,QApEF,WAqEI,KAAJ,cAEE,MAAF,CACI,aADJ,WAEM,GAAN,8BAGQ,IAAR,yBACQ,KAAR,oBACQ,IAAR,uCACU,KAAV,+CAEQ,KAAR,iBAGI,SAAJ,CACM,QADN,WAEQ,IAAR,OAEQ,YAAR,WACA,gCACY,EAAZ,iBAEA,MAGM,WAAN,KCjI0Z,I,yGCOtZC,EAAY,eACd,EACAhC,EACA+B,GACA,EACA,KACA,WACA,MAIa,aAAAC,EAAiB,QAUhC,IAAkBA,EAAW,CAACC,QAAA,KAAMC,WAAA,OAAWC,QAAA,KAAMC,aAAA,KAAWC,aAAA,KAAWC,kBAAA","file":"js/chunk-2d217a30.075b021d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[(Object.keys(_vm.tags).length===0 && !_vm.loadingTags)?_c('div',[_c('EmptyArticles')],1):_c('div',[_c('v-card',{staticClass:\"pa-2\"},[_c('div',{staticClass:\"d-flex justify-space-between\"},[_c('v-card-title',{staticClass:\"pt-0 pb-0 ps-2\"},[_vm._v(\"标签\")]),_c('v-card-title',{staticClass:\"pt-0 pb-0 pe-2\"},[_vm._v(\" 共\"),_c('span',{staticClass:\"display-1 d-inline primary--text\"},[_vm._v(_vm._s(Object.keys(_vm.tags).length))]),_vm._v(\"个 \")])],1),_c('v-chip-group',{attrs:{\"column\":\"\",\"multiple\":\"\",\"active-class\":\"primary--text\"},model:{value:(_vm.selectedTags),callback:function ($$v) {_vm.selectedTags=$$v},expression:\"selectedTags\"}},[(_vm.loadingTags)?_c('div',[_c('v-skeleton-loader',{attrs:{\"type\":\"chip\"}})],1):_c('div',_vm._l((Object.keys(_vm.tags)),function(tag){return _c('v-chip',{key:tag,attrs:{\"filter\":\"\",\"filter-icon\":\"mdi-tag\"}},[_vm._v(\" \"+_vm._s(tag+\" (\"+_vm.tags[tag]+\")\")+\" \")])}),1)])],1),_c('ArticlePreview',{attrs:{\"blog-articles\":_vm.blogArticles,\"total-page\":_vm.totalPages,\"loading\":_vm.loading,\"query-param-tag\":_vm.selectedTagsList},on:{\"transferCurrentPage\":_vm.getCurrentPage}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-container fluid>\r\n        <div v-if=\"Object.keys(tags).length===0 && !loadingTags\">\r\n            <EmptyArticles/>\r\n        </div>\r\n        <div v-else>\r\n            <v-card class=\"pa-2\">\r\n                <div class=\"d-flex justify-space-between\">\r\n                    <v-card-title class=\"pt-0 pb-0 ps-2\">标签</v-card-title>\r\n                    <v-card-title class=\"pt-0 pb-0 pe-2\">\r\n                        共<span class=\"display-1 d-inline primary--text\">{{Object.keys(tags).length}}</span>个\r\n                    </v-card-title>\r\n                </div>\r\n                <v-chip-group column multiple active-class=\"primary--text\" v-model=\"selectedTags\">\r\n                    <div v-if=\"loadingTags\">\r\n                        <v-skeleton-loader type=\"chip\"/>\r\n                    </div>\r\n                    <div v-else>\r\n                        <v-chip filter filter-icon=\"mdi-tag\" v-for=\"tag in Object.keys(tags)\" :key=\"tag\">\r\n                            {{tag+\" (\"+tags[tag]+\")\"}}\r\n                        </v-chip>\r\n                    </div>\r\n                </v-chip-group>\r\n            </v-card>\r\n            <ArticlePreview @transferCurrentPage=\"getCurrentPage\" :blog-articles=\"blogArticles\" :total-page=\"totalPages\"\r\n                            :loading=\"loading\" :query-param-tag=\"selectedTagsList\"/>\r\n        </div>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\n    import ArticlePreview from \"@/components/ArticlePreview\"\r\n    import EmptyArticles from \"@/components/constant/EmptyArticles\"\r\n\r\n    export default {\r\n        name: \"Tag\",\r\n        components: {EmptyArticles, ArticlePreview},\r\n        props: [\"paramTag\"],\r\n        data: () => ({\r\n            tags: [],\r\n            selectedTags: [0],\r\n            selectedTagsList: [],\r\n            blogArticles: [],\r\n            totalPages: 0,\r\n            loading: true,\r\n            loadingTags: true\r\n        }),\r\n        methods: {\r\n            initParamTag() {\r\n                let keys = Object.keys(this.tags)\r\n                for (let i = 0; i < keys.length; i++) {\r\n                    if (keys[i] === this.paramTag) {\r\n                        // console.log(i, keys[i], this.paramTag)\r\n                        this.selectedTags = []\r\n                        this.selectedTags.push(i)\r\n                        break\r\n                    }\r\n                }\r\n            },\r\n            getAllTags() {\r\n                let _this = this\r\n                this.axios.get(this.API.URL.QUERY_TAG_WITH_COUNT, {headers: {'Content-Type': 'multipart/form-data'}})\r\n                    .then(function (result) {\r\n                        _this.loadingTags = false\r\n                        let data = result.data\r\n                        if (data.success) {\r\n                            _this.tags = data.data\r\n                            if (_this.paramTag !== undefined) {\r\n                                _this.initParamTag()\r\n                            } else {\r\n                                _this.selectedTags = [0]\r\n                            }\r\n                        }\r\n                        // console.log(result)\r\n                    }, function (error) {\r\n                        _this.loadingTags = false\r\n                        console.log(error)\r\n                    })\r\n            },\r\n            getArticles(currentPage) {\r\n                this.loading = true\r\n                let _this = this\r\n                this.axios.get(this.API.URL.QUERY_ARTICLE_BY_TAGS + \"&tags=\" + this.selectedTagsList + \"&page=\" + (currentPage - 1), {headers: {'Content-Type': 'multipart/form-data'}})\r\n                    .then(function (result) {\r\n                        _this.loading = false\r\n                        let data = result.data\r\n                        if (data.success) {\r\n                            // console.log(data)\r\n                            _this.totalPages = data.data.totalPages\r\n                            _this.blogArticles = data.data.data\r\n                            // console.log(\"_this.tags\", _this.tags)\r\n                        }\r\n                    }, function (error) {\r\n                        _this.loading = false\r\n                        console.log(error)\r\n                    })\r\n            },\r\n            getCurrentPage(currentPage) {\r\n                this.getArticles(currentPage)\r\n                // console.log(\"从ArticlePreview传过来的当前page为\", currentPage)\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getAllTags()\r\n        },\r\n        watch: {\r\n            selectedTags() {\r\n                if (this.selectedTags.length !== 0) {\r\n                    // console.log(this.selectedTags)\r\n                    // console.log(this.tags)\r\n                    let keys = Object.keys(this.tags)\r\n                    this.selectedTagsList = []\r\n                    for (let i = 0; i < this.selectedTags.length; i++) {\r\n                        this.selectedTagsList.push(keys[this.selectedTags[i]])\r\n                    }\r\n                    this.getArticles(1)\r\n                }\r\n            },\r\n            paramTag: {\r\n                handler() {\r\n                    let _this = this\r\n                    //避免首次获取不到\r\n                    setTimeout(() => {\r\n                        if (Object.keys(_this.tags).length !== 0) {\r\n                            _this.initParamTag()\r\n                        }\r\n                    }, 300)\r\n                },\r\n                // 首次进入页面即执行\r\n                immediate: true\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tag.vue?vue&type=template&id=025a9f62&scoped=true&\"\nimport script from \"./Tag.vue?vue&type=script&lang=js&\"\nexport * from \"./Tag.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"025a9f62\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VChipGroup } from 'vuetify/lib/components/VChipGroup';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VSkeletonLoader } from 'vuetify/lib/components/VSkeletonLoader';\ninstallComponents(component, {VCard,VCardTitle,VChip,VChipGroup,VContainer,VSkeletonLoader})\n"],"sourceRoot":""}